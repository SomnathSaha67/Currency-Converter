<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Currency Converter</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:400,700,900|Montserrat:700&display=swap">
  <link rel="icon" href="/static/favicon.svg" type="image/svg+xml">
  <meta name="theme-color" content="#12223b">
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <div class="app-root">
    <header class="site-header" role="banner">
      <div class="brand">
        <h1 class="brand-title">SwapStream</h1>
        <p class="brand-sub">Fast ‚Ä¢ Transparent ‚Ä¢ Swap-ready</p>
      </div>
      <div class="header-actions">

        <button id="themeToggleBtn" class="theme-btn" title="Toggle Dark/Light" aria-label="Toggle theme">
          <span id="themeToggleIcon">
            <svg width="26" height="26" viewBox="0 0 29 29" fill="none" xmlns="http://www.w3.org/2000/svg" id="sunIcon">
              <circle cx="14.5" cy="14.5" r="6.5" stroke="#fff" stroke-width="2" fill="#ffe965"/>
            </svg>
            <svg width="26" height="26" viewBox="0 0 29 29" fill="none" xmlns="http://www.w3.org/2000/svg" id="moonIcon" style="display: none;">
              <path d="M21.6 18.6A8 8 0 1 1 14.1 6.2a7 7 0 1 0 7.5 12.4z" fill="#acd8fa" stroke="#fff" stroke-width="2"/>
            </svg>
          </span>
        </button>
      </div>
    </header>

    <!-- HERO -->
    <section class="hero" role="region" aria-label="Landing hero">
      <div class="hero-inner">
        <div class="hero-content">
          <h2 class="hero-eyebrow">Built for modern transfers</h2>
          <h1 class="hero-head">Move money globally with confidence</h1>
          <p class="hero-sub">Fast, transparent, and low-cost currency conversions ‚Äî accessible anywhere.</p>

        </div>
        <div class="hero-visual">
          <img src="/static/illus-abstract.svg" alt="Abstract finance illustration" />
        </div>
      </div>
    </section>

    <main class="app-grid" role="main">
      <section class="main-column" aria-label="Primary">
      <!-- Converter form/results (top row, full width) -->
      <form id="convertForm" class="converter" autocomplete="off" onsubmit="return false;">
        <div class="input-row glass-input">
          <input id="amount" type="number" value="1" min="1" step="any" required aria-label="Amount" placeholder="Amount" />
          <select id="from" aria-label="From currency"></select>
          <button type="button" class="swap-btn" id="swapBtn" title="Swap">‚áÜ</button>
          <select id="to" aria-label="To currency"></select>
        </div>
        <div class="input-row">
          <input id="date" type="date" aria-label="Conversion date" placeholder="Date (optional)" />
          <button id="convertBtn" class="primary-btn">Convert</button>
        </div>
        <div id="errorArea" aria-live="assertive"></div>
      </form>

      <section id="resultBox" role="status" aria-atomic="true">
        <div class="result" id="resultArea" aria-live="polite"></div>
        <div class="meta" id="metaArea"></div>
      </section>

      <!-- Fee simulation (only meaningful when a single pair is selected) -->
      <section class="fee-section" aria-label="Fee simulator">
        <h2 class="fee-title">Fee Simulator</h2>
        <p class="fee-desc">
          Add a flat fee and/or a percentage fee to see how much you actually receive after fees.
        </p>
        <div class="fee-inputs">
          <input
            id="feeFlat"
            type="number"
            min="0"
            step="any"
            placeholder="Flat fee in source currency"
            aria-label="Flat fee in source currency"
          />
          <input
            id="feePercent"
            type="number"
            min="0"
            step="any"
            placeholder="Fee % on source amount"
            aria-label="Percentage fee on source amount"
          />
          <button type="button" id="feeCalcBtn" class="primary-btn fee-btn">
            Apply fees
          </button>
          <button type="button" id="feeResetBtn" class="fee-reset-btn">
            Reset
          </button>
        </div>
        <div id="feeResult" class="fee-result" aria-live="polite">
          Run a conversion first, then add your bank or platform fees to simulate the net amount.
        </div>
      </section>

      <!-- Smart rate alert banner -->
      <div id="alertBanner" aria-live="polite" role="status" aria-atomic="true"></div>

      <section id="providerBox">
        <div id="providerArea"></div>
      </section>

      <!-- Left column: Scenario Planner -->
      <section class="scenario-section" aria-label="Scenario planner">
        <h2 class="scenario-title">What if the rate changes?</h2>
        <p id="scenarioHeader">
          Scenario planner will appear when a valid live rate is available.
        </p>
        <table class="scenario-table">
          <thead>
            <tr>
              <th>Rate move</th>
              <th>New rate</th>
              <th>Converted amount</th>
              <th>Difference vs now</th>
            </tr>
          </thead>
          <tbody id="scenarioBody">
          </tbody>
        </table>
      </section>

      <!-- AI-Powered Rate Prediction & Analytics Engine -->
      <section class="ai-prediction-section" aria-label="AI Rate Prediction">
        <div class="ai-header">
          <div>
            <h2 class="ai-title">ü§ñ AI Rate Prediction Engine</h2>
            <p class="ai-subtitle">Advanced ML-powered analytics and forecasting</p>
          </div>
          <button id="analyzePairBtn" class="primary-btn">Analyze Current Pair</button>
        </div>

        <!-- Prediction Cards -->
        <div id="predictionCards" class="prediction-cards">
          <div class="prediction-card">
            <div class="card-icon">üìà</div>
            <div class="card-label">24h Prediction</div>
            <div class="card-value" id="pred24h">--</div>
            <div class="card-confidence" id="conf24h">--</div>
          </div>
          <div class="prediction-card">
            <div class="card-icon">üìä</div>
            <div class="card-label">7-Day Forecast</div>
            <div class="card-value" id="pred7d">--</div>
            <div class="card-confidence" id="conf7d">--</div>
          </div>
          <div class="prediction-card">
            <div class="card-icon">‚ö°</div>
            <div class="card-label">Volatility Score</div>
            <div class="card-value" id="volatilityScore">--</div>
            <div class="card-confidence" id="volatilityLevel">--</div>
          </div>
          <div class="prediction-card">
            <div class="card-icon">üéØ</div>
            <div class="card-label">AI Recommendation</div>
            <div class="card-value" id="aiRecommendation">--</div>
            <div class="card-confidence" id="recommendationReason">--</div>
          </div>
        </div>

        <!-- Historical Chart with Predictions -->
        <div class="chart-container">
          <h3 class="chart-title">Historical Rates & AI Predictions</h3>
          <div class="chart-controls">
            <button class="chart-btn active" data-period="7d">7 Days</button>
            <button class="chart-btn" data-period="30d">30 Days</button>
            <button class="chart-btn" data-period="90d">90 Days</button>
            <button class="chart-btn" data-period="1y">1 Year</button>
          </div>
          <canvas id="predictionChart"></canvas>
        </div>

        <!-- Advanced Analytics -->
        <div class="analytics-grid">
          <div class="analytics-card">
            <h4>üìâ Trend Analysis</h4>
            <div id="trendAnalysis" class="analytics-content">
              Run analysis to see trend patterns...
            </div>
          </div>
          <div class="analytics-card">
            <h4>üîÆ Pattern Recognition</h4>
            <div id="patternRecognition" class="analytics-content">
              Detecting recurring patterns...
            </div>
          </div>
          <div class="analytics-card">
            <h4>üí° Smart Insights</h4>
            <div id="smartInsights" class="analytics-content">
              AI-generated insights will appear here...
            </div>
          </div>
        </div>

        <!-- Risk Assessment -->
        <div class="risk-assessment">
          <h3>üõ°Ô∏è Risk Assessment</h3>
          <div class="risk-bars">
            <div class="risk-bar-item">
              <span>Exchange Rate Risk</span>
              <div class="risk-bar">
                <div class="risk-fill" id="exchangeRisk" style="width: 0%"></div>
              </div>
            </div>
            <div class="risk-bar-item">
              <span>Timing Risk</span>
              <div class="risk-bar">
                <div class="risk-fill" id="timingRisk" style="width: 0%"></div>
              </div>
            </div>
            <div class="risk-bar-item">
              <span>Market Volatility</span>
              <div class="risk-bar">
                <div class="risk-fill" id="marketVolatility" style="width: 0%"></div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Left column: Trip Budget Helper -->
      <section class="trip-section" aria-label="Trip budget helper">
        <h2 class="trip-title">Trip Budget Helper</h2>
        <p class="trip-desc">
          Plan a trip by converting your total budget into the destination currency and seeing a suggested daily budget.
        </p>
        <div class="trip-inputs">
          <input
            id="tripBudget"
            type="number"
            min="0"
            step="any"
            placeholder="Trip budget in home currency"
            aria-label="Trip budget in home currency"
          />
          <input
            id="tripDays"
            type="number"
            min="1"
            step="1"
            placeholder="Number of days"
            aria-label="Number of trip days"
          />
          <button type="button" id="tripCalcBtn" class="primary-btn trip-btn">
            Calculate trip budget
          </button>
        </div>
        <div id="tripResult" class="trip-result" aria-live="polite"></div>
      </section>
      </section>

      <!-- Side column (right on desktop, bottom on mobile) -->
      <aside class="side-column" aria-label="Controls and extras">
        <section class="favorites-section" aria-label="Favorite currency pairs">
        <h2 class="favorites-title">Favorite Pairs</h2>
        <p style="margin:0 0 0.4em 0;font-size:0.96rem;color:var(--text-secondary);">
          Pin your most-used pairs for one-click access.
        </p>
        <button type="button" id="addFavoriteBtn" class="primary-btn" style="padding:0.5em 1.1em;font-size:0.95rem;margin-bottom:0.6em;">
          Add current pair to favorites
        </button>
        <div id="favoritesList" class="favorites-row"></div>
      </section>

      <!-- Right column: Rate alert -->
      <section class="alert-section" aria-label="Rate alerts">
        <h2 class="alert-title">Smart Rate Alert</h2>
        <p style="margin:0 0 0.4em 0;font-size:0.96rem;color:var(--text-secondary);">
          Set a target rate for the selected pair. When the live rate crosses your target, a banner will highlight it.
        </p>
        <div class="alert-controls">
          <span>Alert when rate</span>
          <select id="alertDirection" aria-label="Alert direction">
            <option value="below">falls to or below</option>
            <option value="above">rises to or above</option>
          </select>
          <input id="alertRate" type="number" step="any" min="0" placeholder="Target rate" aria-label="Target rate" />
          <button type="button" id="saveAlertBtn" class="primary-btn" style="padding:0.5em 1.1em;font-size:0.95rem;">
            Save alert
          </button>
        </div>
        <div id="alertSummary" class="alert-summary"></div>
      </section>

        <!-- News / Insights widget (mock) -->
        <section class="news-section" aria-label="News and insights">
          <h2 class="news-title">News & Insights</h2>
          <div id="newsList" class="news-list">Loading news‚Ä¶</div>
          <button id="refreshNewsBtn" class="primary-btn" style="margin-top:0.6em;">Refresh</button>
        </section>
      </aside>
    </main>

    <footer class="site-footer">
      <div>Built by Somnath Saha ‚Ä¢ Minimal design, 2025</div>
      <div class="footer-right">Tip: press <kbd>Ctrl</kbd>+<kbd>Enter</kbd> to convert ‚Ä¢ <kbd>S</kbd> to swap</div>
    </footer>
  </div>
  <!-- Chart.js for sparklines -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script src="/static/main.js"></script>
  <script>
    function setTheme(mode) {
      document.documentElement.setAttribute('data-theme', mode);
      localStorage.setItem('theme', mode);
      if (mode === 'light') {
        document.getElementById("sunIcon").style.display = "none";
        document.getElementById("moonIcon").style.display = "";
      } else {
        document.getElementById("sunIcon").style.display = "";
        document.getElementById("moonIcon").style.display = "none";
      }
    }
    function toggleTheme() {
      const current = localStorage.getItem('theme') || 'dark';
      const next = current === 'light' ? 'dark' : 'light';
      setTheme(next);
    }
    document.addEventListener('DOMContentLoaded', () => {
      const saved = localStorage.getItem('theme') || 'dark';
      setTheme(saved);
      const toggleBtn = document.getElementById('themeToggleBtn');
      if (toggleBtn) toggleBtn.addEventListener('click', () => {
        // small rotate animation
        toggleBtn.animate([{transform:'rotate(0deg)'},{transform:'rotate(360deg)'}],{duration:420,fill:'forwards'});
        toggleTheme();
      });
    });
  </script>
</body>
</html>
